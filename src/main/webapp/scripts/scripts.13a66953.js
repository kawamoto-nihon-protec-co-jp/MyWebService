"use strict";var cnt=0;angular.module("appApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngGrid","ui.bootstrap","googlechart","google-maps".ns()]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/charts",{templateUrl:"views/charts.html",controller:"ChartsCtrl"}).when("/map",{templateUrl:"views/map.html",controller:"MapCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("appApp").controller("MainCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("appApp").controller("AboutCtrl",["$scope","$http","$rootScope",function(a,b,c){function d(){b.get(e).success(function(b){a.myData=b.data}).error(function(){})}a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.myData=[{}],a.pagingOptions={pageSizes:[10,20,100],pageSize:10,currentPage:1},a.gridOptions={data:"myData",enablePaging:!0,showFooter:!1,rowHeight:30,showFilter:!0,enableColumnResize:!0,multiSelect:!1,pagingOptions:a.pagingOptions,totalServerItems:"size",columnDefs:[{displayName:"#",width:60,cellTemplate:'<div align="right">{{row.rowIndex+startCount}}</div>'},{field:"userId",displayName:"ユーザ",width:90},{field:"heartRate",displayName:"心拍数",width:90},{field:"assayDate",displayName:"測定日",width:"*",cellTemplate:"<div>{{row.entity[col.field]}}</div>"},{field:"gpsLatitude",displayName:"測定場所",width:"*",cellTemplate:"<div><a href=\"#/map\" ng-click=\"doChart('{{row.getProperty('gpsLatitude')}}', '{{row.getProperty('gpsLongitude')}}')\">地図</a></div>"}]};var e="http://54.64.73.55/testapp/api/resource/getGridData";d(),a.doSearch=function(){d()},a.doChart=function(a,b){c.gpsLatitude=a,c.gpsLongitube=b}}]),angular.module("appApp").controller("ChartsCtrl",["$scope","$http","$resource","$rootScope",function(a,b){function c(){console.log("createChart");var b={};return b.type="LineChart",b.data=a.chartData,b.options={title:"【心拍数推移】",dataOpacity:.5,height:400,isStacked:!0,animation:{duration:3e3,easing:"linear"},hAxis:{slantedText:!0,viewWindowMode:"pretty",textPosition:"out",title:"測定日"},vAxis:{textPosition:"out",title:"心拍数",ticks:[110,105,100,95,90,85,80,75,70,65,60,55,50]},seriesType:"line"},b}a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.chartData=[];var d="http://54.64.73.55/testapp/api/resource/getChartData";b.get(d).success(function(b){console.log("getHealthData"),a.chartData=b,a.testchart=c()}).error(function(){})}]),angular.module("appApp").controller("MapCtrl",["$scope","$http","$rootScope",function(a,b,c){a.map={center:{latitude:c.gpsLatitude,longitude:c.gpsLongitube},zoom:14},a.options={scrollwheel:!1},a.coordsUpdates=0,a.dynamicMoveCtr=0,a.marker={id:0,coords:{latitude:c.gpsLatitude,longitude:c.gpsLongitube},options:{draggable:!0},events:{dragend:function(b){$log.log("marker dragend");var c=b.getPosition().lat(),d=b.getPosition().lng();$log.log(c),$log.log(d),a.marker.options={draggable:!0,labelContent:"lat: "+a.marker.coords.latitude+" lon: "+a.marker.coords.longitude,labelAnchor:"100 0",labelClass:"marker-labels"}}}},a.$watchCollection("marker.coords",function(b,c){_.isEqual(b,c)||a.coordsUpdates++})}]);